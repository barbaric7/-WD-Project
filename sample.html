<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Customized Wishes</title>
        <style>
            .wish {
                margin: 10px 0;
            }

            .wish button {
                margin-left: 10px;
            }
        </style>
    </head>

    <body>
        <div id="wishesContainer"></div>

        <script>
            // The wish data is defined as per your previous code
            const wishes = {
                Diwali: {
                    Marathi: [
                        "शुभ दीपावली! 🪔🎉",
                        "सुख आणि समृद्धीच्या दीपावलीच्या शुभेच्छा! 🌟✨"
                    ],
                    Hindi: [
                        "दीपावली की हार्दिक शुभकामनाएं! 🪔🎉",
                        "खुशियों की दीपावली मुबारक! 🌟"
                    ],
                    English: [
                        "Happy Diwali to U ! 🪔🎉",
                        "May this diwali bring lot of happiness and light to your life! 🌟"
                    ]
                },
                "New Year": {
                    Marathi: ["नवीन वर्षाच्या हार्दिक शुभेच्छा!", "नवीन वर्ष आनंदमय जावो!"],
                    Hindi: ["नव वर्ष की हार्दिक शुभकामनाएं!", "नया साल खुशियों से भरा हो!"]
                },
                "Sankrant": {
                    Marathi: [
                        "मकर संक्रांतीच्या हार्दिक शुभेच्छा! 🌞🌾",
                        "तीळ गुळ घ्या, गोडगोड बोला! आनंदाने साजरा करा संक्रांतीचा सण! 🪁🎉"
                    ],
                    Hindi: [
                        "मकर संक्रांति की हार्दिक शुभकामनाएं! 🌞🌾",
                        "तिल-गुड़ खाएं, मीठा-मीठा बोलें, संक्रांति का त्योहार खुशी से मनाएं! 🪁🎉"
                    ],
                    English: [
                        "Wishing you a joyful Makar Sankranti filled with happiness and prosperity! 🌞🌾",
                        "Celebrate this Sankranti with sweet moments and high spirits! 🪁🎉"
                    ]
                }
            };

            // Function to load and display wishes
            function loadWishes() {
                const urlParams = new URLSearchParams(window.location.search);
                const language = urlParams.get("language");
                const festival = urlParams.get("festival");

                const wishesContainer = document.getElementById("wishesContainer");
                wishesContainer.innerHTML = "";

                if (wishes[festival] && wishes[festival][language]) {
                    wishes[festival][language].forEach((wish) => {
                        const wishDiv = document.createElement("div");
                        wishDiv.className = "wish";

                        const wishText = document.createElement("p");
                        wishText.innerText = wish;

                        // Create the Send button
                        const sendButton = document.createElement("button");
                        sendButton.innerText = "Send";
                        sendButton.onclick = () => sendWish(wish);

                        // Create the Customize button
                        const customizeButton = document.createElement("button");
                        customizeButton.innerText = "Customize";
                        customizeButton.onclick = () => customizeWish(wishText);

                        wishDiv.appendChild(wishText);
                        wishDiv.appendChild(sendButton);
                        wishDiv.appendChild(customizeButton);
                        wishesContainer.appendChild(wishDiv);
                    });
                } else {
                    wishesContainer.innerHTML = "<p>No wishes found for the selected festival and language.</p>";
                }
            }

            // Function to send the wish
            function sendWish(wishText) {
                const whatsappLink = `https://wa.me/?text=${encodeURIComponent(wishText)}`;
                window.open(whatsappLink, "_blank");
            }

            // Function to allow customization of the wish
            function customizeWish(wishTextElement) {
                const originalText = wishTextElement.innerText;
                const inputField = document.createElement("input");
                inputField.type = "text";
                inputField.value = originalText;
                wishTextElement.innerHTML = ''; // Clear the existing wish text
                wishTextElement.appendChild(inputField);

                // Change the Customize button to "Save"
                const saveButton = document.createElement("button");
                saveButton.innerText = "Save";
                saveButton.onclick = () => saveCustomizedWish(inputField, originalText, wishTextElement);
                wishTextElement.appendChild(saveButton);
            }

            function saveCustomizedWish(inputField, originalText, wishTextElement) {
                const customizedText = inputField.value;

                if (customizedText.trim() === "") {
                    alert("Wish cannot be empty.");
                    inputField.value = originalText; // Restore original text if empty
                    return;
                }

                // Update the displayed wish text with the customized one
                wishTextElement.innerHTML = customizedText;

                // Add the send functionality back
                const sendButton = document.createElement("button");
                sendButton.innerText = "Send";
                sendButton.onclick = () => sendWish(customizedText);
                wishTextElement.appendChild(sendButton);

                // Remove the Save button after saving
                const saveButton = wishTextElement.querySelector("button");
                saveButton.remove();
            }

            // Load wishes when the page loads
            window.onload = loadWishes;
        </script>
    </body>

</html>